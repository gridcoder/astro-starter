---
import { getLocale } from "astro-i18n-aut"
import { ViewTransitions } from "astro:transitions"
import BaseHead from "@components/BaseHead.astro"
import Navbar from "@components/Navbar_v2.svelte"
// import Navbar from "@components/Navbar.astro";
import Footer from "@components/Footer.astro"
import { SITE_TITLE, SITE_DESCRIPTION } from "@src/consts"
import LanguageSelector from "@components/LanguageSelector.astro"
import ThemeSelector from "@components/ThemeSelector.astro"
import { localizePath, tFn } from "@utils/t"

const locale = getLocale(Astro.url)
const url = Astro.url

// replaced dynamically
const buildDate = new Date(__DATE__)

type Props = {
  title?: string
  description?: string
  image?: string
}

const { image, title = SITE_TITLE, description = SITE_DESCRIPTION } = Astro.props as Props
---

<html lang={locale}>
  <head>
    <BaseHead title={title} description={description} image={image} />
    {/* Comment the line below if you want to remove client side routing */}
    <ViewTransitions />
  </head>

  <body>
    <header
      class="flex flex-col max-w-screen-xl lg:py-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8 z-10 md:pt-2 relative">
      <a href={localizePath("/", url)} class="text-lg font-semibold">{SITE_TITLE}</a>
      <Navbar url={Astro.url} />
      <ThemeSelector />
      <LanguageSelector showFlag={false} />
    </header>
    <main>
      <slot />
    </main>
    <Footer {buildDate} />
  </body>
</html>
